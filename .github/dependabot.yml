# @license GPL-3.0-or-later
# Copyright (C) 2025 Caleb Gyamfi - Omnixys Technologies
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
# See the GNU General Public License for more details.
#
# For more information, visit <https://www.gnu.org/licenses/>.
#
# Omnixys Workflow Suite â€“ dependabot.yml
# Purpose: Automated dependency management and security updates across ecosystems.
# Language: Universal

version: 2
updates:
  # ðŸŸ¦ Node / pnpm Dependencies
  - package-ecosystem: "npm"
    directory: "/"
    schedule:
      interval: "daily"
      time: "03:00"
      timezone: "Europe/Berlin"
    commit-message:
      prefix: "deps(node)"
      include: "scope"
    labels:
      - "ðŸ“¦ dependencies"
      - "ðŸ§© needs-review"
    open-pull-requests-limit: 10
    rebase-strategy: auto
    allow:
      - dependency-type: "direct"
      - dependency-type: "all"
    ignore:
      - dependency-name: "eslint"
        versions: ["<9.0.0"]
      - dependency-name: "typescript"
        versions: ["<5.0.0"]

  # ðŸ³ Docker Base Image Updates
  - package-ecosystem: "docker"
    directory: "/"
    schedule:
      interval: "weekly"
      day: "sunday"
      time: "04:00"
      timezone: "Europe/Berlin"
    commit-message:
      prefix: "deps(docker)"
      include: "scope"
    labels:
      - "ðŸ³ docker"
      - "ðŸ§© needs-review"
    rebase-strategy: auto
    ignore:
      - dependency-name: "node"
        versions: ["<20.0.0"]

  # âš™ï¸ GitHub Actions Updates
  - package-ecosystem: "github-actions"
    directory: "/"
    schedule:
      interval: "weekly"
      day: "monday"
      time: "05:00"
      timezone: "Europe/Berlin"
    commit-message:
      prefix: "deps(actions)"
      include: "scope"
    labels:
      - "ðŸ§  ci"
      - "ðŸ“¦ dependencies"
    open-pull-requests-limit: 5
    rebase-strategy: auto

  # â˜• Java / Maven Dependencies (for microservices)
  - package-ecosystem: "maven"
    directory: "/"
    schedule:
      interval: "weekly"
      day: "tuesday"
      time: "05:00"
      timezone: "Europe/Berlin"
    commit-message:
      prefix: "deps(java)"
      include: "scope"
    labels:
      - "â˜• java"
      - "ðŸ“¦ dependencies"
    rebase-strategy: auto

  # ðŸ§± Python Dependencies (FastAPI, tooling, or scripts)
  - package-ecosystem: "pip"
    directory: "/"
    schedule:
      interval: "weekly"
      day: "wednesday"
      time: "06:00"
      timezone: "Europe/Berlin"
    commit-message:
      prefix: "deps(python)"
      include: "scope"
    labels:
      - "ðŸ python"
      - "ðŸ“¦ dependencies"
    rebase-strategy: auto

  # ðŸ” Security & CVE Prioritization Updates
  - package-ecosystem: "npm"
    directory: "/"
    schedule:
      interval: "daily"
      time: "02:00"
      timezone: "Europe/Berlin"
    commit-message:
      prefix: "security"
      include: "scope"
    labels:
      - "ðŸ”’ security"
      - "âš ï¸ vulnerability"
    allow:
      - dependency-type: "direct"
    rebase-strategy: auto
    ignore:
      - dependency-name: "*"
        update-types: ["version-update:semver-patch"]
